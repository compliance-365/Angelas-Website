---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE } from '../config/site';

const base = import.meta.env.BASE_URL;

// JSON-LD
const orgSchema = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: SITE.name,
  url: SITE.url,
  logo: `${SITE.url}/brand/logo-icon.svg`,
  sameAs: [],
  address: { '@type': 'PostalAddress', addressLocality: 'Brisbane', addressRegion: 'QLD', addressCountry: 'AU' },
  description: SITE.description
};

const webSiteSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: SITE.name,
  url: SITE.url,
  potentialAction: {
    '@type': 'SearchAction',
    target: `${SITE.url}/?q={search_term_string}`,
    'query-input': 'required name=search_term_string'
  }
};

const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: 'What is included in your RAP service?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'We support Reflect, Innovate, Stretch and Elevate RAPs from discovery and drafting through governance, delivery and evidence-based reporting.'
      }
    },
    {
      '@type': 'Question',
      name: 'Can we host the RAP Dashboard in our Microsoft 365 tenant?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Yes. We provide a SharePoint PnP template that is imported to your tenant. We then configure permissions, lists, views and Power Automate flows.'
      }
    },
    {
      '@type': 'Question',
      name: 'Do you provide cultural competency training?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Yes. We offer awareness modules, leadership sessions and team pathways tailored by sector. Self-paced e-learning is in development.'
      }
    }
  ]
};
---

<BaseLayout
  title="RAP Consultants & Cultural Competency Training | 2Ways Consultancy"
  description="Indigenous-led consultancy delivering Reconciliation Action Plans (RAP), a SharePoint RAP Dashboard for evidence & reporting, and cultural competency training. Brisbane-based, serving Australia-wide."
  canonical={`${SITE.url}/`}
  schema={[orgSchema, webSiteSchema, faqSchema]}
>
  <Fragment slot="header"><Header /></Fragment>

  <!-- HERO: Parallax + Glass Card -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0">
      <div
        class="h-[48rem] bg-cover bg-center md:bg-fixed will-change-transform"
        style={`background-image:url('${base}hero-home.webp')`}
        data-parallax
        data-speed="0.15"
      ></div>
      <div class="absolute inset-0 bg-gradient-to-b from-black/65 via-black/40 to-black/30"></div>
    </div>

    <div class="relative mx-auto max-w-6xl px-4 h-[48rem] flex items-end pb-12">
      <div class="max-w-4xl text-white bg-white/10 backdrop-blur-md rounded-2xl p-6 md:p-8 border border-white/20 reveal opacity-0 translate-y-4">
        <p class="kicker">Indigenous Australian–led</p>
        <h1 class="text-4xl md:text-6xl font-extrabold leading-[1.1]">
          Reconciliation Action Plans & Cultural Competency Training
        </h1>
        <p class="mt-4 md:text-lg text-white/90">
          We help organisations plan, deliver and report on RAPs — backed by a SharePoint RAP Dashboard for actions,
          evidence and governance — and practical training that builds cultural safety across teams.
        </p>
        <div class="mt-7 flex flex-wrap items-center gap-3">
          <a href={`${base}services/rap/`} class="btn">Explore RAP Services</a>
          <a href={`${base}services/dashboard/`} class="btn-outline">See RAP Dashboard</a>
          <a href={`${base}services/training/`} class="btn-outline">Training Programs</a>
        </div>

        <!-- Trust bar -->
        <div class="mt-6 flex flex-wrap items-center gap-3 text-xs text-white/90">
          <span class="inline-flex items-center gap-2 bg-white/10 rounded-full px-3 py-2 backdrop-blur-sm">
            <img src={`${base}brand/supply-nation-placeholder.svg`} alt="Supply Nation Registered (placeholder)" class="h-5 w-5" />
            Supply Nation Registered
          </span>
          <span class="inline-flex items-center gap-2 bg-white/10 rounded-full px-3 py-2 backdrop-blur-sm">
            <span class="h-2 w-2 rounded-full bg-emerald-300"></span> Brisbane-based, Australia-wide
          </span>
          <span class="inline-flex items-center gap-2 bg-white/10 rounded-full px-3 py-2 backdrop-blur-sm">
            <span class="h-2 w-2 rounded-full bg-cyan-300"></span> SharePoint + Power Platform friendly
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- VALUE PROPS -->
  <section class="section pt-10">
    <div class="grid md:grid-cols-3 gap-4">
      <div class="grid-card card-raise reveal opacity-0 translate-y-4">
        <span class="pill-strong">Outcome-driven</span>
        <p class="mt-3 text-sm text-gray-700">Governance, owners and evidence — so RAPs move from documents to measurable impact.</p>
      </div>
      <div class="grid-card card-raise reveal opacity-0 translate-y-4">
        <span class="pill">SharePoint-ready</span>
        <p class="mt-3 text-sm text-gray-700">RAP Dashboard lists, views and flows provisioned to your Microsoft 365 tenant.</p>
      </div>
      <div class="grid-card card-raise reveal opacity-0 translate-y-4">
        <span class="pill">Respectful + Practical</span>
        <p class="mt-3 text-sm text-gray-700">Indigenous-led, culturally grounded training and engagement tailored to your sector.</p>
      </div>
    </div>
  </section>

  <!-- WHAT WE DO (Icon Cards) -->
  <section class="section pt-0">
    <h2 class="text-2xl font-semibold reveal">What we do</h2>
    <div class="grid md:grid-cols-3 gap-6 mt-6">
      <a class="stage-card p-6 card-raise reveal opacity-0 translate-y-4" href={`${base}services/rap/`}>
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">RAP Strategy & Delivery</h3>
          <span class="icon-circle" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 5h13l5 4v10H3V5z" stroke="white" stroke-width="1.8"/><path d="M16 5v6h5" stroke="white" stroke-width="1.8"/></svg>
          </span>
        </div>
        <p class="mt-2 text-sm">Reflect → Innovate → Stretch → Elevate. Clear governance, timelines and measurable outcomes.</p>
      </a>

      <a class="stage-card p-6 card-raise reveal opacity-0 translate-y-4" href={`${base}services/dashboard/`}>
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">RAP Dashboard (SharePoint)</h3>
          <span class="icon-circle" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 20V8m6 12V4m6 16v-6m4 6V10" stroke="white" stroke-width="1.8"/></svg>
          </span>
        </div>
        <p class="mt-2 text-sm">Actions, owners, due dates, evidence & quarterly roll-ups. Exportable to your tenant.</p>
      </a>

      <a class="stage-card p-6 card-raise reveal opacity-0 translate-y-4" href={`${base}services/training/`}>
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">Cultural Competency Training</h3>
          <span class="icon-circle" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="7" r="3" stroke="white" stroke-width="1.8"/><path d="M5 21a7 7 0 0 1 14 0" stroke="white" stroke-width="1.8"/></svg>
          </span>
        </div>
        <p class="mt-2 text-sm">Awareness modules, leadership sessions and team pathways with sector-specific examples.</p>
      </a>
    </div>
  </section>

  <!-- PROCESS (Animated Stage Bars) -->
  <section class="section pt-0">
    <h2 class="text-2xl font-semibold reveal">How we work</h2>
    <div class="grid md:grid-cols-4 gap-6 mt-6">
      <div class="stage-card p-5 reveal opacity-0 translate-y-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">1. Discover</h3>
          <span class="pill">Baseline</span>
        </div>
        <p class="text-sm mt-2">Stakeholder mapping, maturity check, compliance and goals.</p>
      </div>
      <div class="stage-card p-5 reveal opacity-0 translate-y-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">2. Plan</h3>
          <span class="pill">Roadmap</span>
        </div>
        <p class="text-sm mt-2">Owners, timelines, metrics and governance cadence.</p>
      </div>
      <div class="stage-card p-5 reveal opacity-0 translate-y-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">3. Deliver</h3>
          <span class="pill">Enable</span>
        </div>
        <p class="text-sm mt-2">Training, engagement, supplier diversity and communications.</p>
      </div>
      <div class="stage-card p-5 reveal opacity-0 translate-y-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">4. Report</h3>
          <span class="pill">Evidence</span>
        </div>
        <p class="text-sm mt-2">Evidence capture, dashboards, quarterly roll-ups and review.</p>
      </div>
    </div>
  </section>

  <!-- OPTIONAL LOGOS STRIP (Replace with real logos when ready) -->
  <section class="section pt-4">
    <div class="border rounded-2xl p-6 bg-white reveal opacity-0 translate-y-4">
      <p class="text-sm text-gray-500">Trusted by teams across utilities, government and construction.</p>
      <div class="mt-4 grid grid-cols-2 md:grid-cols-5 gap-4 place-items-center opacity-80">
        <img src={`${base}brand/logo-icon.svg`} alt="" class="h-8" />
        <img src={`${base}brand/logo-icon.svg`} alt="" class="h-8" />
        <img src={`${base}brand/logo-icon.svg`} alt="" class="h-8" />
        <img src={`${base}brand/logo-icon.svg`} alt="" class="h-8" />
        <img src={`${base}brand/logo-icon.svg`} alt="" class="h-8" />
      </div>
    </div>
  </section>

  <!-- TESTIMONIAL -->
  <section class="section pt-4">
    <div class="grid md:grid-cols-[1.2fr_.8fr] gap-6">
      <blockquote class="stage-card p-6 reveal opacity-0 translate-y-4">
        <p class="text-lg md:text-xl font-semibold">
          “2Ways turned our RAP from a checklist into a program with accountability. Their dashboard made progress visible and our teams more confident.”
        </p>
        <footer class="mt-3 text-sm text-gray-600">HR Manager — Utilities</footer>
      </blockquote>
      <div class="stage-card p-6 reveal opacity-0 translate-y-4">
        <h3 class="font-semibold">Why partner with 2Ways</h3>
        <ul class="list-disc ml-5 text-sm mt-2 text-gray-700">
          <li>Indigenous-led, culturally grounded</li>
          <li>RAP Dashboard provisioned to your tenant</li>
          <li>Practical training pathways for leaders & teams</li>
        </ul>
        <a href={`${base}case-studies/`} class="btn mt-4 inline-flex">See case studies</a>
      </div>
    </div>
  </section>

  <!-- CTA BANNER -->
  <section class="section">
    <div class="cta-banner">
      <div>
        <h3 class="text-xl font-semibold">Ready to move from intent to impact?</h3>
        <p class="text-white/90 text-sm">Book a discovery call or request a RAP Dashboard demo.</p>
      </div>
      <div class="flex gap-3">
        <a class="btn bg-white text-[var(--brand-dark)] hover:bg-white/90" href={`${base}contact/`}>Talk to us</a>
        <a class="btn-outline border-white text-white hover:bg-white/10" href={`${base}services/dashboard/`}>Request a demo</a>
      </div>
    </div>
  </section>

  <!-- FAQ (matches FAQ schema) -->
  <section class="section pt-6">
    <h2 class="text-2xl font-semibold reveal">FAQs</h2>
    <div class="mt-6 grid gap-4">
      <details class="p-4 border rounded-xl reveal opacity-0 translate-y-4">
        <summary class="font-semibold">What is included in your RAP service?</summary>
        <p class="mt-2 text-sm">Support across Reflect, Innovate, Stretch and Elevate: discovery, drafting, governance, delivery and reporting.</p>
      </details>
      <details class="p-4 border rounded-xl reveal opacity-0 translate-y-4">
        <summary class="font-semibold">Can we host the RAP Dashboard in our Microsoft 365 tenant?</summary>
        <p class="mt-2 text-sm">Yes — we provide a SharePoint PnP template and help configure lists, views, permissions and flows.</p>
      </details>
      <details class="p-4 border rounded-xl reveal opacity-0 translate-y-4">
        <summary class="font-semibold">Do you provide cultural competency training?</summary>
        <p class="mt-2 text-sm">Yes — awareness modules, leadership sessions and team pathways; self-paced e-learning is coming soon.</p>
      </details>
    </div>
  </section>

  <Fragment slot="footer"><Footer /></Fragment>

  <!-- Parallax (mobile fallback) + Reveal -->
  <script is:inline>
    // desktop gets bg-fixed; mobile gets translate fallback
    const parallaxEls = document.querySelectorAll('[data-parallax]');
    const onScroll = () => {
      const y = window.scrollY || window.pageYOffset;
      parallaxEls.forEach(el => {
        if (window.matchMedia('(max-width: 767px)').matches) {
          const speed = parseFloat(el.dataset.speed || '0.15');
          el.style.transform = `translate3d(0,${y * speed * -0.4}px,0)`;
        }
      });
    };
    window.addEventListener('scroll', onScroll, { passive: true }); onScroll();

    // simple reveal
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.remove('opacity-0','translate-y-4'); io.unobserve(e.target); }
      });
    },{threshold:0.15});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
  </script>
</BaseLayout>
